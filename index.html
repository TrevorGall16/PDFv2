<!DOCTYPE html>
<html lang="fr" data-theme="swiss" class="antialiased">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Le Bouclier 20h–22h — V5.5 Tactical Funnel</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&family=JetBrains+Mono:wght@400;500;600;700&family=Roboto+Mono:wght@400;500;600;700&family=Lora:ital,wght@0,400;0,600;0,700;1,400;1,700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body class="min-h-screen selection:bg-gray-900 selection:text-white">
  <div class="app-shell">
    <nav id="setup-sidebar" class="no-print">
      <div class="setup-header">
        <div class="flex items-center gap-2">
          <span class="setup-title">Setup</span>
          <span id="save-indicator" class="save-indicator">
            <svg class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
          </span>
        </div>
        <span id="edit-hint" class="setup-hint"></span>
      </div>
      <div class="setup-block">
        <h2 class="setup-label">Theme</h2>
        <div id="tg" class="pg pill-group-bg">
          <button data-theme="swiss" class="pl on">MIN</button>
          <button data-theme="lab" class="pl">LAB</button>
          <button data-theme="athlete" class="pl">ATH</button>
          <button data-theme="eco" class="pl">ECO</button>
        </div>
      </div>
      <div class="setup-block">
        <h2 class="setup-label">Language</h2>
        <div id="lg" class="pg pill-group-bg">
          <button data-lang="en" class="pl">EN</button>
          <button data-lang="fr" class="pl on">FR</button>
          <button data-lang="es" class="pl">ES</button>
          <button data-lang="it" class="pl">IT</button>
          <button data-lang="ru" class="pl">RU</button>
          <button data-lang="jp" class="pl">JP</button>
        </div>
      </div>
      <div class="setup-block">
        <h2 class="setup-label" id="mult-label"></h2>
        <div class="pg pill-group-bg">
          <button data-mult="0.5" class="pl mn">0.5x</button>
          <button data-mult="1" class="pl mn on">1x</button>
          <button data-mult="1.5" class="pl mn">1.5x</button>
          <button data-mult="2" class="pl mn">2x</button>
        </div>
      </div>
      <div class="setup-block">
        <h2 class="setup-label" id="variant-label">Variant</h2>
        <div id="vg" class="pg pill-group-bg">
          <button data-variant="solo" class="pl vr on">SOLO</button>
          <button data-variant="couple" class="pl vr">COUPLE</button>
          <button data-variant="family" class="pl vr">FAMILY</button>
        </div>
      </div>
      <div class="setup-block">
        <h2 class="setup-label">Text Formatting</h2>
        <div class="format-section">
          <span class="format-section-label">Size</span>
          <div class="format-actions">
            <button class="tb-btn fs-btn" data-action="font-size" data-size="14">14</button>
            <button class="tb-btn fs-btn" data-action="font-size" data-size="18">18</button>
            <button class="tb-btn fs-btn" data-action="font-size" data-size="24">24</button>
            <button class="tb-btn fs-btn" data-action="font-size" data-size="32">32</button>
            <button class="tb-btn fs-btn" data-action="font-size" data-size="48">48</button>
          </div>
        </div>
        <div class="format-actions">
          <button class="tb-btn fmt-btn" data-action="format-bold"><b>B</b></button>
          <button class="tb-btn fmt-btn" data-action="format-italic"><i>I</i></button>
          <button class="tb-btn fmt-btn" data-action="format-underline"><u>U</u></button>
        </div>
      </div>
      <div class="setup-actions">
        <button id="btn-compact" class="tb-btn" data-action="toggle-compact">
          <span id="compact-label"></span>
        </button>
        <button class="tb-btn" data-action="open-shop">
          <span id="shop-label"></span>
        </button>
        <button id="btn-restore" class="tb-btn" data-action="restore-defaults">
          <span id="restore-label"></span>
        </button>
      </div>
    </nav>

    <div class="app-content">
      <div id="restore-toast" class="restore-toast no-print"></div>
      <div id="overflow-alert" class="overflow-alert no-print hidden">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
        <span id="overflow-alert-text"></span>
      </div>

      <main id="page" class="a4-page lang-fade grid gap-12">
        <svg class="stamp" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="50" cy="50" r="46" stroke="currentColor" stroke-width="3"/>
          <circle cx="50" cy="50" r="40" stroke="currentColor" stroke-width="1"/>
          <text x="50" y="44" text-anchor="middle" font-weight="900" font-size="10" fill="currentColor" letter-spacing="2">VERIFIED</text>
          <text x="50" y="56" text-anchor="middle" font-weight="700" font-size="7" fill="currentColor">PROTOCOL</text>
          <text x="50" y="66" text-anchor="middle" font-size="6" fill="currentColor">20h–22h</text>
        </svg>

        <section data-module="header" class="module group print-brk">
          <div class="module-ctrl no-print">
            <button class="mod-arrow" data-action="move-module" data-dir="-1">&#x2191;</button>
            <button class="mod-arrow" data-action="move-module" data-dir="1">&#x2193;</button>
          </div>
          <header id="header-root">
            <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-5">
              <div class="space-y-3 max-w-lg">
                <h1 id="title" contenteditable="true" data-edit-key="header:title"
                  class="editable-cell text-3xl sm:text-4xl font-black uppercase tracking-tight leading-[1.05] whitespace-pre-line hd"></h1>
                <p id="subtitle" contenteditable="true" data-edit-key="header:subtitle"
                  class="editable-cell text-xs font-medium tracking-wide tm"></p>
                <div id="identity-block" class="identity-block">
                  <div class="identity-field">
                    <span class="identity-label" id="protocol-for-label"></span>
                    <span contenteditable="true" data-edit-key="identity:name" class="editable-cell identity-value" id="protocol-for-name"></span>
                  </div>
                  <div class="identity-field">
                    <span class="identity-label" id="version-label-el"></span>
                    <span contenteditable="true" data-edit-key="identity:version" class="editable-cell identity-value mn" id="version-value"></span>
                  </div>
                </div>
              </div>
              <div id="cost-block" class="cost-block hidden"></div>
            </div>
          </header>
        </section>

        <section data-module="protocol" class="module group print-brk">
          <div class="module-ctrl no-print">
            <button class="mod-arrow" data-action="move-module" data-dir="-1">&#x2191;</button>
            <button class="mod-arrow" data-action="move-module" data-dir="1">&#x2193;</button>
          </div>
          <div id="protocol-body" class="grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6"></div>
          <button class="tb-btn restore-btn no-print mt-3" data-action="add-step">+ <span id="step-add-label"></span></button>
        </section>

        <section data-module="tier1" class="module group print-brk">
          <div class="module-ctrl no-print">
            <button class="mod-arrow" data-action="move-module" data-dir="-1">&#x2191;</button>
            <button class="mod-arrow" data-action="move-module" data-dir="1">&#x2193;</button>
          </div>
          <div class="tier1-block">
            <div class="tier1-header">
              <h2 id="tier-title" class="tier1-title hd"></h2>
              <p id="tier-subtitle" class="tier1-subtitle tm"></p>
            </div>
            <div id="tier1-body" class="grid gap-6"></div>
            <button class="tb-btn restore-btn no-print mt-3" data-action="restore-tier1">+ <span id="tier1-add-label"></span></button>
          </div>
        </section>
      </main>

      <div id="page2" class="a4-page lang-fade grid gap-10">
        <section data-module="categories" class="module group">
          <div class="module-ctrl no-print">
            <button class="mod-arrow" data-action="move-module" data-dir="-1">&#x2191;</button>
            <button class="mod-arrow" data-action="move-module" data-dir="1">&#x2193;</button>
          </div>
          <div id="categories-root" class="grid gap-10"></div>
        </section>

        <section data-module="footer" class="module group print-brk">
          <div class="module-ctrl no-print">
            <button class="mod-arrow" data-action="move-module" data-dir="-1">&#x2191;</button>
            <button class="mod-arrow" data-action="move-module" data-dir="1">&#x2193;</button>
          </div>
          <footer id="footer-root">
            <div class="ftr-sep h-px mb-5"></div>
            <p id="motivation" contenteditable="true" data-edit-key="footer:motto" class="editable-cell text-center text-[11px] italic font-medium leading-relaxed tm"></p>
            <div class="mt-4 flex flex-col sm:flex-row items-center justify-between gap-2 text-[10px] mn tracking-wide tm">
              <span id="footer-ver"></span>
              <span id="footer-date"></span>
            </div>
            <div class="print-btn-wrap no-print mt-6 flex justify-center">
              <button data-action="print" class="print-action-btn">
                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect x="6" y="14" width="12" height="8"/></svg>
                <span id="print-btn-label"></span>
              </button>
            </div>
          </footer>
        </section>
      </div>

      <div id="shopping-page" class="a4-page hidden">
        <div class="flex items-start justify-between mb-4">
          <div>
            <h2 id="shop-title" class="text-2xl font-black uppercase tracking-tight hd"></h2>
            <p id="shop-subtitle" class="mt-1 text-xs tm font-medium"></p>
          </div>
          <button data-action="close-shop" class="no-print tm text-lg shop-close">&times;</button>
        </div>
        <div id="shop-clear-wrap" class="no-print mb-4 hidden">
          <button data-action="clear-shop" class="clear-all-btn">
            <span id="shop-clear-label"></span>
          </button>
        </div>
        <div id="shop-body" class="grid grid-cols-1 sm:grid-cols-2 gap-x-10 gap-y-1"></div>
        <div class="mt-4 no-print">
          <button data-action="add-shop" class="shop-add-btn">
            + <span id="shop-add-label"></span>
          </button>
        </div>
        <div class="mt-8 pt-4 shop-footer">
          <p id="shop-footer" class="text-[10px] mn text-center tm"></p>
        </div>
      </div>
    </div>
  </div>

  <script src="data.js"></script>
  <script src="app.js"></script>
</body>
</html>
